---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: apimapideployments.apim.operator.io
spec:
  group: apim.operator.io
  names:
    kind: APIMAPIDeployment
    listKind: APIMAPIDeploymentList
    plural: apimapideployments
    singular: apimapideployment
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: APIMAPIDeployment is the Schema for the APIMAPIDeployments API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: |-
              APIMAPIDeploymentSpec defines the desired state of APIMAPIDeployment.
              This spec contains all the information needed to deploy an API to Azure API Management,
              including the OpenAPI definition, service URL, route configuration, and associations.
            properties:
              APIID:
                description: APIID is the unique identifier for the API in Azure APIM.
                type: string
              apimService:
                description: APIMService is the name of the APIMService custom resource.
                type: string
              openApiDefinitionUrl:
                description: OpenAPIDefinitionURL is the URL where the OpenAPI/Swagger
                  definition can be fetched.
                type: string
              productIds:
                description: ProductIDs is a list of product IDs to associate this
                  API with in APIM.
                items:
                  type: string
                type: array
              resourceGroup:
                description: ResourceGroup is the Azure resource group where the APIM
                  service is located.
                type: string
              revision:
                description: Revision is an optional API revision number. If specified,
                  a new revision will be created.
                type: string
              routePrefix:
                description: RoutePrefix is the base route path in APIM (e.g., "/myapi").
                type: string
              serviceUrl:
                description: ServiceURL is the backend service URL that APIM will
                  proxy requests to.
                type: string
              subscription:
                description: Subscription is the Azure subscription ID where the APIM
                  service is deployed.
                type: string
              tagIds:
                description: TagIDs is a list of tag IDs to apply to this API in APIM.
                items:
                  type: string
                type: array
              subscriptionRequired:
                description: |-
                  SubscriptionRequired controls whether a subscription key is required to access the API.
                  If set to false, the API can be accessed without a subscription key.
                  If not specified, defaults to true (subscription required).
                type: boolean
            required:
            - APIID
            - apimService
            - openApiDefinitionUrl
            - resourceGroup
            - routePrefix
            - serviceUrl
            - subscription
            type: object
          status:
            description: |-
              APIMAPIDeploymentStatus defines the observed state of APIMAPIDeployment.
              This status tracks the deployment progress and result.
            properties:
              importedAt:
                description: ImportedAt is the timestamp when the API was successfully
                  imported into APIM.
                type: string
              status:
                description: Status indicates the current deployment status (e.g.,
                  "OK", "Error").
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
