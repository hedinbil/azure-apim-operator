---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: apimapis.apim.hedinit.io
spec:
  group: apim.hedinit.io
  names:
    kind: APIMAPI
    listKind: APIMAPIList
    plural: apimapis
    singular: apimapi
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: |-
          APIMAPI is the Schema for the apimapis API.
          APIMAPI is a Kubernetes custom resource that represents an API in Azure API Management.
          When created, it triggers the import of an OpenAPI definition into APIM and configures
          the API with the specified route prefix, service URL, products, and tags.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of the API in APIM.
            properties:
              APIID:
                description: APIID is the unique identifier for the API in Azure APIM.
                type: string
              apimService:
                description: |-
                  APIMService is the name of the APIMService custom resource that references
                  the Azure API Management service instance.
                type: string
              openApiDefinitionUrl:
                description: OpenAPIDefinitionURL is the URL where the OpenAPI/Swagger
                  definition can be fetched.
                type: string
              productIds:
                description: |-
                  ProductIDs is a list of product IDs to associate this API with in APIM.
                  Products are used to group APIs and require subscriptions.
                items:
                  type: string
                type: array
              routePrefix:
                description: RoutePrefix is the base route path in APIM (e.g., "/myapi").
                type: string
              serviceUrl:
                description: ServiceURL is the backend service URL that APIM will
                  proxy requests to.
                type: string
              tagIds:
                description: |-
                  TagIDs is a list of tag IDs to apply to this API in APIM.
                  Tags are used for categorization and organization.
                items:
                  type: string
                type: array
            required:
            - APIID
            - apimService
            - openApiDefinitionUrl
            - routePrefix
            - serviceUrl
            type: object
          status:
            description: Status reflects the observed state of the API in APIM.
            properties:
              apiHost:
                description: ApiHost is the full URL to access the API through APIM
                  (e.g., "https://api.example.com/myapi").
                type: string
              developerPortalHost:
                description: DeveloperPortalHost is the URL of the APIM developer
                  portal.
                type: string
              importedAt:
                description: ImportedAt is the timestamp when the API was successfully
                  imported into APIM.
                type: string
              status:
                description: Status indicates the current status of the API (e.g.,
                  "OK", "Error").
                type: string
            required:
            - apiHost
            - developerPortalHost
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
