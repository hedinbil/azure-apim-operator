name: Agent Renova ðŸ§¹ - Repository Cleanup
run-name: Agent Renova ðŸ§¹ Repository Cleanup

on:
  workflow_dispatch:
    inputs:
      cleanup_type:
        description: 'Type of cleanup to perform'
        required: true
        default: 'all'
        type: choice
        options:
          - 'all'
          - 'workflow-runs'
          - 'artifacts'
          - 'branches'
  schedule:
    # Run every two hours
    - cron: '0 */2 * * *'

permissions:
  contents: write
  actions: write
  id-token: write
  pull-requests: read
  issues: read

jobs:
  cleanup:
    name: Repository Cleanup
    runs-on: ubuntu-latest
    steps:
      - name: Run Renova Agent
        uses: hedinbil/hedin-github-actions-public/agent-renova@main
        with:
          cleanup-type: ${{ github.event.inputs.cleanup_type || 'all' }}
          github-token: ${{ secrets.GITHUB_TOKEN }}
